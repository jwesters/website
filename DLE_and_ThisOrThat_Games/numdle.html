<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Numdle (Daily + Random • 4/5/6 digits)</title>

<style>
:root{
  --bg:#0f1115; --panel:#151923; --text:#e9eef7; --muted:#aab3c4;
  --tile:#1c2230; --tileBorder:#2a3347;
  --good:#2ecc71; --mid:#f1c40f; --bad:#3a4156;
  --key:#20283a; --keyBorder:#2a3347;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --radius:14px;
  --gap:10px;
  --tileSize:54px;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  background:radial-gradient(1200px 600px at 20% 0%,#1a2240 0%,var(--bg) 45%) fixed;
  color:var(--text);
  display:flex;
  justify-content:center;
  padding:24px;
}

.wrap{
  width:min(720px,100%);
  background:rgba(21,25,35,.9);
  border:1px solid rgba(255,255,255,.06);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
}

header{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:12px;
}

h1{
  margin:0;
  font-size:18px;
  display:flex;
  gap:10px;
  align-items:center;
}

.badge{
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  color:var(--muted);
}

button,select{
  background:rgba(255,255,255,.06);
  color:var(--text);
  border:1px solid rgba(255,255,255,.12);
  border-radius:10px;
  padding:8px 10px;
  font-weight:700;
  cursor:pointer;
}

button:hover,select:hover{background:rgba(255,255,255,.1)}
.danger{background:rgba(255,75,75,.18);border-color:rgba(255,75,75,.4)}

.controls{
  margin:12px 0;
  padding:10px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
  border-radius:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  font-size:13px;
}

.label{font-weight:800}
.pill{
  padding:4px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  font-size:12px;
}

.board{
  display:grid;
  gap:var(--gap);
  padding:10px;
  border-radius:14px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  overflow-x:auto;
}

.row{
  display:grid;
  justify-content:center;
  gap:var(--gap);
}

.tile{
  width:var(--tileSize);
  height:var(--tileSize);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:900;
  background:var(--tile);
  border:1px solid var(--tileBorder);
  border-radius:12px;
}

.tile.good{background:rgba(46,204,113,.2);border-color:rgba(46,204,113,.6)}
.tile.mid{background:rgba(241,196,15,.2);border-color:rgba(241,196,15,.6)}
.tile.bad{background:rgba(58,65,86,.5);border-color:rgba(58,65,86,.9)}

.status{
  margin:12px 0;
  padding:10px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
  border-radius:12px;
  font-size:14px;
}

.keys{
  display:grid;
  gap:8px;
  justify-content:center;
}

.keyRow{
  display:flex;
  gap:8px;
  justify-content:center;
}

.key{
  min-width:44px;
  height:46px;
  border-radius:12px;
  background:var(--key);
  border:1px solid var(--keyBorder);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  cursor:pointer;
}

.key.wide{min-width:90px;font-size:14px}
.key.good{background:rgba(46,204,113,.25)}
.key.mid{background:rgba(241,196,15,.25)}
.key.bad{background:rgba(58,65,86,.6)}
</style>
</head>

<body>
<div class="wrap">
<header>
<h1>Numdle <span class="badge">Daily + Random • 4 / 5 / 6 digits</span></h1>
<div>
<button id="dailyBtn">Daily</button>
<button id="randomBtn">Random</button>
<button id="resetBtn" class="danger">Reset</button>
</div>
</header>

<div class="controls">
<span class="label">Digits:</span>
<select id="digitsSelect">
<option value="4">4 digits</option>
<option value="5" selected>5 digits</option>
<option value="6">6 digits</option>
</select>

<span class="label">Difficulty:</span>
<select id="difficultySelect">
<option value="easy">Easy (9)</option>
<option value="medium" selected>Medium (7)</option>
<option value="hard">Hard (5)</option>
</select>

<span class="pill" id="summaryPill"></span>
</div>

<div id="board" class="board"></div>

<div class="status" id="statusText"></div>

<div class="keys">
<div class="keyRow">
<div class="key" data-k="1">1</div><div class="key" data-k="2">2</div><div class="key" data-k="3">3</div>
<div class="key" data-k="4">4</div><div class="key" data-k="5">5</div>
</div>
<div class="keyRow">
<div class="key" data-k="6">6</div><div class="key" data-k="7">7</div><div class="key" data-k="8">8</div>
<div class="key" data-k="9">9</div><div class="key" data-k="0">0</div>
</div>
<div class="keyRow">
<div class="key wide" data-k="Backspace">⌫ Back</div>
<div class="key wide" data-k="Enter">Enter</div>
</div>
</div>
</div>

<script>
const DIFF={easy:9,medium:7,hard:5};
const SALT="numdle6";

let digits=+localStorage.getItem("digits")||5;
let diff=localStorage.getItem("diff")||"medium";
let mode=localStorage.getItem("mode")||"daily";

digitsSelect.value=digits;
difficultySelect.value=diff;

function tileSize(){
  document.documentElement.style.setProperty(
    "--tileSize",
    digits===6?"46px":"54px"
  );
}

function rng(seed){
  return ()=>((seed=Math.imul(seed^seed>>>15,1|seed))+((seed^seed>>>7)*61))>>>0;
}

function target(){
  const max=10**digits;
  if(mode==="daily"){
    const d=new Date().toDateString();
    let s=0;for(const c of d)s+=c.charCodeAt(0);
    return String(rng(s)()%max).padStart(digits,"0");
  }
  return String(Math.floor(Math.random()*max)).padStart(digits,"0");
}

let answer=target();
let row=0,col=0;
let guesses=Array(DIFF[diff]).fill("");
let results=Array(DIFF[diff]).fill(null);

function draw(){
  tileSize();
  board.innerHTML="";
  summaryPill.textContent=`${digits} digits • ${diff.toUpperCase()} • ${DIFF[diff]} guesses`;
  for(let r=0;r<guesses.length;r++){
    const rowEl=document.createElement("div");
    rowEl.className="row";
    rowEl.style.gridTemplateColumns=`repeat(${digits},var(--tileSize))`;
    for(let c=0;c<digits;c++){
      const t=document.createElement("div");
      t.className="tile";
      t.textContent=guesses[r][c]||"";
      if(results[r]) t.classList.add(results[r][c]);
      rowEl.appendChild(t);
    }
    board.appendChild(rowEl);
  }
}

function score(g){
  const res=Array(digits).fill("bad");
  const cnt={};
  for(let i=0;i<digits;i++){
    if(g[i]===answer[i]) res[i]="good";
    else cnt[answer[i]]=(cnt[answer[i]]||0)+1;
  }
  for(let i=0;i<digits;i++){
    if(res[i]==="bad" && cnt[g[i]]){
      res[i]="mid";cnt[g[i]]--;
    }
  }
  return res;
}

function submit(){
  if(guesses[row].length!==digits) return;
  results[row]=score(guesses[row]);
  if(guesses[row]===answer){
    statusText.innerHTML=`✅ Correct! <strong>${answer}</strong>`;
    draw();return;
  }
  row++;
  if(row>=guesses.length){
    statusText.innerHTML=`❌ Out of guesses. <strong>${answer}</strong>`;
    draw();return;
  }
  draw();
}

document.addEventListener("keydown",e=>{
  if(/[0-9]/.test(e.key)&&guesses[row].length<digits){
    guesses[row]+=e.key;draw();
  }
  if(e.key==="Backspace"){
    guesses[row]=guesses[row].slice(0,-1);draw();
  }
  if(e.key==="Enter") submit();
});

document.querySelectorAll(".key").forEach(k=>{
  k.onclick=()=>handle(k.dataset.k);
});

function handle(k){
  if(/[0-9]/.test(k)&&guesses[row].length<digits){
    guesses[row]+=k;draw();
  }
  if(k==="Backspace"){
    guesses[row]=guesses[row].slice(0,-1);draw();
  }
  if(k==="Enter") submit();
}

digitsSelect.onchange=()=>{
  digits=+digitsSelect.value;
  localStorage.setItem("digits",digits);
  location.reload();
};
difficultySelect.onchange=()=>{
  diff=difficultySelect.value;
  localStorage.setItem("diff",diff);
  location.reload();
};
dailyBtn.onclick=()=>{mode="daily";localStorage.setItem("mode",mode);location.reload();}
randomBtn.onclick=()=>{mode="random";localStorage.setItem("mode",mode);location.reload();}
resetBtn.onclick=()=>location.reload();

draw();
statusText.textContent="Enter your guess.";
</script>
</body>
</html>
