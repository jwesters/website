<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Practice Generator (0–10)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    .topbar { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
    .spacer { flex: 1; }
    .name { text-align: right; min-width: 320px; margin-top: 8px; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 16px; margin-top: 16px; }
    h1 { margin: 8px 0 0; font-size: 24px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 48px; margin-top: 18px; }
    .q { font-size: 20px; line-height: 1.6; }
    label { font-weight: 600; }
    select, button { padding: 8px 10px; font-size: 14px; }
    button { cursor: pointer; }
    .muted { color: #666; font-size: 13px; margin-top: 6px; }

    @media print {
      .topbar, .muted { display: none !important; }
      body { margin: 0.5in; }
      .card { border: none; padding: 0; }
      .q { font-size: 18px; }
    }
  </style>
</head>
<body>

<div class="topbar">
  <label for="mode">Operation:</label>
  <select id="mode">
    <option value="add">Addition (+)</option>
    <option value="sub">Subtraction (−)</option>
    <option value="mul">Multiplication (×)</option>
    <option value="div">Division (÷)</option>
  </select>

  <label for="group">Group:</label>
  <select id="group"></select>

  <button id="generate">Generate</button>
  <button onclick="window.print()">Print</button>

  <div class="spacer"></div>
</div>

<div class="name"><strong>Name:</strong> _______________________________</div>

<div class="card">
  <h1 id="title"></h1>
  <div class="muted" id="rules"></div>
  <div class="grid" id="questions"></div>
</div>

<script>
  // ================= CONFIG =================
  const LETTERS = "abcdefghij".split("");
  const OTHER_MIN = 0;
  const OTHER_MAX = 10;

  // Subtraction rule: if subtracting by 7+, minuend can go up to 15
  const MINUEND_MAX_NORMAL = 10;
  const MINUEND_MAX_HIGH = 15;
  const HIGH_THRESHOLD = 7;

  const GROUPS = [
    { label: "0–2", values: [0,1,2] },
    { label: "3–4", values: [3,4] },
    { label: "5–6", values: [5,6] },
    { label: "7–8", values: [7,8] },
    { label: "9–10", values: [9,10] },
    { label: "All (0–10)", values: [0,1,2,3,4,5,6,7,8,9,10] }
  ];

  // ================= UI =================
  const modeEl = document.getElementById("mode");
  const groupEl = document.getElementById("group");
  const titleEl = document.getElementById("title");
  const rulesEl = document.getElementById("rules");
  const qEl = document.getElementById("questions");

  function fillGroups() {
    groupEl.innerHTML = "";
    GROUPS.forEach((g, i) => {
      const opt = document.createElement("option");
      opt.value = i;
      opt.textContent = g.label;
      groupEl.appendChild(opt);
    });
  }

  // ================= HELPERS =================
  const randInt = (min, max) =>
    Math.floor(Math.random() * (max - min + 1)) + min;

  // For commutative ops: treat a⊕b and b⊕a as the same question
  const canonicalPair = (a, b) => (a <= b ? `${a},${b}` : `${b},${a}`);

  function groupLabel(values) {
    const min = Math.min(...values);
    const max = Math.max(...values);
    return (min === 0 && max === 10 && values.length === 11) ? "All (0–10)" : `${min}–${max}`;
  }

  // ================= QUESTION GENERATION =================
  function makeAddQuestion(groupVals) {
    const addend = groupVals[randInt(0, groupVals.length - 1)];
    const other = randInt(OTHER_MIN, OTHER_MAX);
    const flip = Math.random() < 0.5;
    const a = flip ? other : addend;
    const b = flip ? addend : other;
    return { a, b, text: `${a} + ${b} =`, key: canonicalPair(a, b) };
  }

  function makeMulQuestion(groupVals) {
    const factor = groupVals[randInt(0, groupVals.length - 1)];
    const other = randInt(OTHER_MIN, OTHER_MAX);
    const flip = Math.random() < 0.5;
    const a = flip ? other : factor;
    const b = flip ? factor : other;
    // Use × symbol in display (still plain text)
    return { a, b, text: `${a} × ${b} =`, key: canonicalPair(a, b) };
  }

  function makeSubQuestion(groupVals) {
    const sub = groupVals[randInt(0, groupVals.length - 1)];
    const maxMinuend = (sub >= HIGH_THRESHOLD) ? MINUEND_MAX_HIGH : MINUEND_MAX_NORMAL;
    const minuend = randInt(sub, maxMinuend); // ensures no negatives
    return { a: minuend, b: sub, text: `${minuend} − ${sub} =`, key: `${minuend},${sub}` };
  }

  function makeDivQuestion(groupVals) {
    // divisor comes from group, but cannot be 0
    let divisor = groupVals[randInt(0, groupVals.length - 1)];
    if (divisor === 0) return null;

    // pick an integer quotient so dividend divides evenly
    // keep quotient in 0..10 for consistency; if divisor is large (7+), allow dividend to be larger
    const quotient = randInt(0, 10);

    // dividend = divisor * quotient (always remainder-free)
    // For divisor 7+, dividend can go up to 15*divisor by allowing quotient up to 15 sometimes
    const qMax = (divisor >= HIGH_THRESHOLD) ? 15 : 10;
    const q = randInt(0, qMax);
    const dividend = divisor * q;

    return { a: dividend, b: divisor, text: `${dividend} ÷ ${divisor} =`, key: `${dividend},${divisor}` };
  }

  function generateQuestions(mode, groupVals) {
    const seen = new Set();
    const out = [];
    let attempts = 0;

    while (out.length < 10) {
      attempts++;
      if (attempts > 10000) throw new Error("Unable to generate enough unique questions.");

      let q = null;
      if (mode === "add") q = makeAddQuestion(groupVals);
      if (mode === "sub") q = makeSubQuestion(groupVals);
      if (mode === "mul") q = makeMulQuestion(groupVals);
      if (mode === "div") q = makeDivQuestion(groupVals);

      if (!q) continue; // e.g., division by 0 skip

      if (seen.has(q.key)) continue;
      seen.add(q.key);
      out.push(q.text);
    }
    return out;
  }

  // ================= RENDER =================
  function render() {
    const mode = modeEl.value;
    const group = GROUPS[parseInt(groupEl.value, 10)];

    const opName = {
      add: "Adding",
      sub: "Subtracting",
      mul: "Multiplying",
      div: "Dividing"
    }[mode];

    titleEl.textContent = `${opName} ${group.label}`;

    if (mode === "add") {
      rulesEl.textContent = "10 questions (a–j). Numbers 0–10. No duplicates (3+7 and 7+3 count as duplicates).";
    } else if (mode === "mul") {
      rulesEl.textContent = "10 questions (a–j). Numbers 0–10. No duplicates (3×7 and 7×3 count as duplicates).";
    } else if (mode === "sub") {
      rulesEl.textContent = "10 questions (a–j). No negatives. If subtracting by 7 or higher, the minuend may go up to 15.";
    } else {
      rulesEl.textContent = "10 questions (a–j). No remainders. Division by 0 is excluded automatically.";
    }

    const qs = generateQuestions(mode, group.values);

    qEl.innerHTML = "";
    qs.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "q";
      div.textContent = `${LETTERS[i]}. ${q}`;
      qEl.appendChild(div);
    });
  }

  // ================= INIT =================
  fillGroups();
  groupEl.value = "0";
  render();

  document.getElementById("generate").addEventListener("click", render);
  modeEl.addEventListener("change", render);
  groupEl.addEventListener("change", render);
</script>

</body>
</html>
