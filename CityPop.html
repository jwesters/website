<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Canada Population DLE</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    text-align: center;
    padding: 30px;
  }
  .card {
    background: white;
    padding: 25px;
    max-width: 450px;
    margin: auto;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  button {
    padding: 12px 25px;
    margin: 10px;
    font-size: 16px;
    cursor: pointer;
  }
  .hidden {
    display: none;
  }
  .score {
    font-weight: bold;
    margin-top: 15px;
  }
  textarea {
    width: 100%;
    height: 100px;
    margin-top: 10px;
  }
</style>
</head>
<body>

<div class="card" id="game">
  <h2>Canada City Population DLE</h2>

  <p><strong id="cityA"></strong></p>
  <p>Population: <strong id="popA"></strong></p>

  <hr>

  <p><strong id="cityB"></strong></p>
  <p>Population: ???</p>

  <button onclick="guess('higher')">‚¨ÜÔ∏è Higher</button>
  <button onclick="guess('lower')">‚¨áÔ∏è Lower</button>

  <p class="score">Streak: <span id="score">0</span></p>
</div>

<!-- END SCREEN -->
<div class="card hidden" id="endScreen">
  <h2>üìä Game Over</h2>
  <p><strong>Final Streak:</strong> <span id="finalScore"></span></p>
  <p><strong>Date:</strong> <span id="gameDate"></span></p>

  <h3>üèÜ Share Your Score</h3>
  <textarea id="shareText" readonly></textarea>
  <button onclick="copyScore()">üìã Copy</button>
</div>

<script>
// ---- City Data (Top 100 approx) ----
const cities = [
  ["Toronto, Ontario",2794356],
  ["Montreal, Quebec",1762949],
  ["Calgary, Alberta",1306784],
  ["Edmonton, Alberta",1010899],
  ["Mississauga, Ontario",828854],
  ["Brampton, Ontario",656480],
  ["Hamilton, Ontario",569353],
  ["Surrey, British Columbia",568322],
  ["Laval, Quebec",438366],
  ["Halifax, Nova Scotia",439819],
  ["Markham, Ontario",338503],
  ["Vaughan, Ontario",323103],
  ["Gatineau, Quebec",291041],
  ["Saskatoon, Saskatchewan",266141],
  ["Kitchener, Ontario",256885],
  ["Burnaby, British Columbia",249125],
  ["Regina, Saskatchewan",226404],
  ["Richmond, British Columbia",209937],
  ["Oakville, Ontario",213759],
  ["Burlington, Ontario",186948],
  ["Oshawa, Ontario",175383],
  ["Sherbrooke, Quebec",172950],
  ["Greater Sudbury, Ontario",166004],
  ["Abbotsford, British Columbia",153524],
  ["Guelph, Ontario",143740],
  ["Saguenay, Quebec",144723],
  ["Kelowna, British Columbia",144576],
  ["Barrie, Ontario",147829],
  ["Coquitlam, British Columbia",148625],
  ["Trois-Rivi√®res, Quebec",139163],
  ["Moncton, New Brunswick",79470],
  ["Saint John, New Brunswick",68150],
  ["St. Catharines, Ontario",133113],
  ["Cambridge, Ontario",138479],
  ["Whitby, Ontario",138501],
  ["Ajax, Ontario",126666],
  ["Waterloo, Ontario",121436],
  ["Brantford, Ontario",104688],
  ["Red Deer, Alberta",106736],
  ["Lethbridge, Alberta",106550],
  ["St. John's, Newfoundland and Labrador",110525],
  ["Thunder Bay, Ontario",108843],
  ["Chatham-Kent, Ontario",103671],
  ["Victoria, British Columbia",91967],
  ["Nanaimo, British Columbia",100442],
  ["Kamloops, British Columbia",97902],
  ["Prince George, British Columbia",74170],
  ["Medicine Hat, Alberta",63171],
  ["Grande Prairie, Alberta",69473],
  ["Airdrie, Alberta",70525],
  ["Okotoks, Alberta",30405],
  ["Cochrane, Alberta",32577],
  ["Chestermere, Alberta",22247],
  ["Leduc, Alberta",34509],
  ["Spruce Grove, Alberta",37792],
  ["St. Albert, Alberta",68232],
  ["Fort McMurray, Alberta",68002],
  ["Cold Lake, Alberta",15573],
  ["Lloydminster, Alberta/Saskatchewan",35235],
  ["Estevan, Saskatchewan",11300],
  ["Moose Jaw, Saskatchewan",33000],
  ["Swift Current, Saskatchewan",16600],
  ["Yorkton, Saskatchewan",16700],
  ["Prince Albert, Saskatchewan",37300],
  ["North Battleford, Saskatchewan",13700],
  ["Selkirk, Manitoba",10600],
  ["Steinbach, Manitoba",17000],
  ["Brandon, Manitoba",51313],
  ["Portage la Prairie, Manitoba",13800],
  ["Thompson, Manitoba",13200],
  ["Flin Flon, Manitoba",4900],
  ["Winnipeg, Manitoba",749607],
  ["Dauphin, Manitoba",8500],
  ["Morden, Manitoba",9000],
  ["Winkler, Manitoba",13000],
  ["Kenora, Ontario",15000],
  ["Dryden, Ontario",7900],
  ["Sarnia, Ontario",71594],
  ["Windsor, Ontario",229660],
  ["London, Ontario",422324],
  ["Woodstock, Ontario",41000],
  ["Stratford, Ontario",32000],
  ["Ingersoll, Ontario",14000],
  ["Tillsonburg, Ontario",16000],
  ["Simcoe, Ontario",16000],
  ["Norfolk, Ontario",65000],
  ["Milton, Ontario",132979],
  ["Newmarket, Ontario",87942],
  ["Aurora, Ontario",62057],
  ["Kingston, Ontario",123798],
  ["Belleville, Ontario",55800],
  ["Quinte West, Ontario",43000],
  ["Cobourg, Ontario",19500],
  ["Port Hope, Ontario",16700],
  ["Peterborough, Ontario",84387],
  ["Kawartha Lakes, Ontario",79000],
  ["Orillia, Ontario",33000],
  ["Midland, Ontario",18000],
  ["Collingwood, Ontario",24500],
  ["Wasaga Beach, Ontario",24000],
  ["Bradford, Ontario",35000],
  ["Orangeville, Ontario",34000],
  ["Caledon, Ontario",76000],
  ["Brockville, Ontario",21000],
  ["Cornwall, Ontario",47000],
  ["Pembroke, Ontario",14000],
  ["Renfrew, Ontario",9000],
  ["Ottawa, Ontario",1017449],
  ["Carleton Place, Ontario",42000],
  ["Arnprior, Ontario",9000],
  ["Valleyfield, Quebec",42000],
  ["Drummondville, Quebec",79705],
  ["Victoriaville, Quebec",49000],
  ["Thetford Mines, Quebec",26000],
  ["Rimouski, Quebec",49900],
  ["Rivi√®re-du-Loup, Quebec",35000],
  ["Baie-Comeau, Quebec",23000],
  ["Sept-√éles, Quebec",25000],
  ["Matane, Quebec",13000],
  ["Gasp√©, Quebec",15000],
  ["Rouyn-Noranda, Quebec",43000],
  ["Val-d'Or, Quebec",33000],
  ["Amos, Quebec",13000],
  ["Mont-Tremblant, Quebec",10000],
  ["Joliette, Quebec",21000],
  ["Saint-Hyacinthe, Quebec",58000],
  ["Granby, Quebec",69000],
  ["Boucherville, Quebec",42000],
  ["Ch√¢teauguay, Quebec",50000],
  ["La Prairie, Quebec",26000],
  ["Longueuil, Quebec",246816],
  ["Brossard, Quebec",91800],
  ["Saint-Jean-sur-Richelieu, Quebec",98000],
  ["Saint-J√©r√¥me, Quebec",80000],
  ["Mascouche, Quebec",55000],
  ["Terrebonne, Quebec",119944],
  ["L√©vis, Quebec",149683],
  ["Qu√©bec City, Quebec",549459],
  ["L'Ancienne-Lorette, Quebec",17000],
  ["Shawinigan, Quebec",49000],
  ["Dolbeau-Mistassini, Quebec",14000],
  ["Alma, Quebec",31000],
  ["Roberval, Quebec",10000],
  ["Bathurst, New Brunswick",12000],
  ["Miramichi, New Brunswick",17000],
  ["Dieppe, New Brunswick",28114],
  ["Riverview, New Brunswick",20000],
  ["Charlottetown, Prince Edward Island",38709],
  ["Summerside, Prince Edward Island",16000],
  ["Sydney, Nova Scotia",30015],
  ["New Glasgow, Nova Scotia",9000],
  ["Truro, Nova Scotia",13000],
  ["Kentville, Nova Scotia",7000],
  ["Amherst, Nova Scotia",9500],
  ["Whitehorse, Yukon",28000],
  ["Yellowknife, Northwest Territories",20000],
  ["Iqaluit, Nunavut",7740]
];

// ---- Daily Seed Shuffle ----
function seededRandom(seed) {
  let x = Math.sin(seed++) * 10000;
  return x - Math.floor(x);
}

function shuffle(array) {
  const seed = new Date().toDateString().split("")
    .reduce((a,c)=>a+c.charCodeAt(0),0);
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(seededRandom(seed + i) * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}
shuffle(cities);

// ---- Game State ----
let index = Math.floor(Math.random() * (cities.length - 1));
let score = 0;
let results = [];

function showCities() {
  document.getElementById("cityA").textContent = cities[index][0];
  document.getElementById("popA").textContent =
    cities[index][1].toLocaleString();
  
  document.getElementById("cityB").innerHTML =
  document.getElementById("cityB").innerHTML =
  `Is <strong>${cities[index+1][0]}</strong>'s population higher or lower than the one above?`;
}

function guess(choice) {
  const a = cities[index][1];
  const b = cities[index+1][1];
  const correct =
    (choice === "higher" && b > a) ||
    (choice === "lower" && b < a);

  results.push(correct ? "üü©" : "üü•");

  if (correct) {
    score++;
    index++;
    document.getElementById("score").textContent = score;
    showCities();
  } else {
    endGame();
  }
}

function endGame() {
  document.getElementById("game").classList.add("hidden");
  document.getElementById("endScreen").classList.remove("hidden");

  const dateStr = new Date().toDateString();
  document.getElementById("finalScore").textContent = score;
  document.getElementById("gameDate").textContent = dateStr;

  // NEW: show the population of the city they got wrong
  const wrongCity = cities[index + 1][0];
  const wrongPop = cities[index + 1][1].toLocaleString();

  document.getElementById("endScreen").insertAdjacentHTML(
    "afterbegin",
    `<p><strong>${wrongCity}</strong> population was <strong>${wrongPop}</strong>.</p>`
  );

  const share =
`Canada Population DLE üá®üá¶
${results.join("")}
Streak: ${score}
üìÖ ${dateStr}`;

  document.getElementById("shareText").value = share;
}

function copyScore() {
  navigator.clipboard.writeText(
    document.getElementById("shareText").value
  );
  alert("Score copied!");
}

showCities();
</script>

</body>
</html>
